{"version":3,"sources":["components/Blog.js","services/blogs.js","components/CreateBlogForm.js","components/LoginForm.js","components/Notification.js","components/Togglable.js","services/login.js","App.js","index.js"],"names":["BlogDetails","blog","setShow","handleLike","handleDelete","user","console","log","className","url","likes","onClick","username","id","Blog","useState","show","title","author","style","marginLeft","baseUrl","token","getAll","axios","get","then","response","data","setToken","newToken","create","newObject","a","config","headers","Authorization","post","update","updatedObject","put","remove","delete","CreateBlogForm","blogs","setBlogs","setNotification","setTitle","setAuthor","setUrl","handleCreateBlog","event","preventDefault","blogService","createdBlog","concat","message","type","setTimeout","onSubmit","value","name","onChange","target","LoginForm","handleLogin","setUsername","password","setPassword","Notification","notification","Togglable","props","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","buttonLabel","children","login","credentials","App","setUser","useEffect","loggedInUser","window","localStorage","getItem","JSON","parse","updatedBlog","filter","Logo","role","aria-label","LogoutButton","removeItem","loginService","setItem","stringify","blogsSortedByLike","sort","b","map","key","blogForm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0aaf3035.chunk.js","sourcesContent":["import React, { useState } from \"react\";\n\nconst Blog = ({ blog, handleLike, handleDelete, user }) => {\n  const [show, setShow] = useState(false);\n\n  return (\n    <div className=\"blog\">\n      {blog.title} - {blog.author ? blog.author : \"No Author\"}\n      {show && blog.user ? (\n        <BlogDetails\n          blog={blog}\n          setShow={setShow}\n          handleLike={handleLike}\n          handleDelete={handleDelete}\n          user={user}\n        />\n      ) : (\n        <button onClick={() => setShow(!show)} style={{ marginLeft: 5 }}>\n          View\n        </button>\n      )}\n    </div>\n  );\n};\n\nconst BlogDetails = ({ blog, setShow, handleLike, handleDelete, user }) => {\n  console.log(blog.user, user);\n  return (\n    <div className=\"details\">\n      <p>URL: {blog.url}</p>\n      <p>\n        Likes: {blog.likes}\n        <button onClick={() => handleLike(blog)}>Like</button>\n      </p>\n      <p>User: {blog.user ? blog.user.username : null}</p>\n      <button onClick={() => setShow(false)}>Hide</button>\n      {blog.user.id === user.id ? (\n        <button onClick={() => handleDelete(blog.id)}>Delete</button>\n      ) : null}\n    </div>\n  );\n};\n\nexport default Blog;\n","import axios from \"axios\";\nconst baseUrl = \"http://localhost:3003/api/blogs\";\n\nlet token = null;\n\nconst setToken = (newToken) => {\n  token = `bearer ${newToken}`;\n};\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = async (newObject) => {\n  // set authorization headers\n  const config = {\n    headers: { Authorization: token },\n  };\n\n  const response = await axios.post(baseUrl, newObject, config);\n  return response.data;\n};\n\nconst update = async (id, updatedObject) => {\n  const response = await axios.put(`${baseUrl}/${id}`, updatedObject);\n  return response.data;\n};\n\nconst remove = async (id) => {\n  const config = {\n    headers: { Authorization: token },\n  };\n\n  axios.delete(`${baseUrl}/${id}`, config);\n};\n\nexport default { getAll, setToken, create, update, remove };\n","import React, { useState } from \"react\";\nimport blogService from \"../services/blogs\";\n\nconst CreateBlogForm = ({ blogs, setBlogs, setNotification, user }) => {\n  const [title, setTitle] = useState(\"\");\n  const [author, setAuthor] = useState(\"\");\n  const [url, setUrl] = useState(\"\");\n\n  const handleCreateBlog = async (event) => {\n    event.preventDefault();\n\n    try {\n      const createdBlog = await blogService.create({\n        title,\n        author,\n        url,\n        user,\n      });\n\n      setBlogs(blogs.concat(createdBlog));\n\n      setNotification({\n        message: `${createdBlog.title} by ${createdBlog.author} created!`,\n        type: \"success\",\n      });\n\n      setTimeout(() => {\n        setNotification({});\n      }, 5000);\n    } catch (exception) {\n      setNotification({\n        message: \"Creating blog failed\",\n        type: \"error\",\n      });\n    }\n  };\n\n  return (\n    <form onSubmit={handleCreateBlog}>\n      <p>\n        Title:\n        <input\n          type=\"text\"\n          value={title}\n          name=\"title\"\n          onChange={({ target }) => setTitle(target.value)}\n        />\n      </p>\n      <p>\n        Author:\n        <input\n          type=\"text\"\n          value={author}\n          name=\"author\"\n          onChange={({ target }) => setAuthor(target.value)}\n        />\n      </p>\n      <p>\n        Url:\n        <input\n          type=\"text\"\n          value={url}\n          name=\"url\"\n          onChange={({ target }) => setUrl(target.value)}\n        />\n      </p>\n      <input type=\"submit\" value=\"Create\" />\n    </form>\n  );\n};\n\nexport default CreateBlogForm;\n","import React from \"react\";\n\nconst LoginForm = ({\n  handleLogin,\n  username,\n  setUsername,\n  password,\n  setPassword,\n}) => (\n  <form id=\"loginForm\" onSubmit={handleLogin}>\n    <h1>Login</h1>\n    <p>\n      Username\n      <input\n        type=\"text\"\n        value={username}\n        name=\"Username\"\n        onChange={({ target }) => setUsername(target.value)}\n      />\n    </p>\n    <p>\n      Password\n      <input\n        type=\"text\"\n        value={password}\n        name=\"Password\"\n        onChange={({ target }) => setPassword(target.value)}\n      />\n    </p>\n    <button type=\"submit\">login</button>\n  </form>\n);\n\nexport default LoginForm;\n","import React from \"react\";\n\nconst Notification = ({ notification }) => {\n  if (!notification.message) return null;\n\n  return (\n    <p className={`notifications ${notification.type}`}>\n      {notification.message}\n    </p>\n  );\n};\n\nexport default Notification;\n","import React, { useState } from \"react\";\n\nconst Togglable = (props) => {\n  const [visible, setVisible] = useState(false);\n\n  const hideWhenVisible = { display: visible ? \"none\" : \"\" };\n  const showWhenVisible = { display: visible ? \"\" : \"none\" };\n\n  const toggleVisibility = () => {\n    setVisible(!visible);\n  };\n\n  return (\n    <div>\n      <div style={hideWhenVisible}>\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\n      </div>\n      <div style={showWhenVisible}>\n        {props.children}\n        <button onClick={toggleVisibility}>cancel</button>\n      </div>\n    </div>\n  );\n};\n\nexport default Togglable;\n","import axios from \"axios\";\nconst baseUrl = \"http://localhost:3003/api/login\";\n\nconst login = async (credentials) => {\n  const response = await axios.post(baseUrl, credentials);\n  return response.data;\n};\n\nexport default { login };\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.scss\";\n\n// components\nimport Blog from \"./components/Blog\";\nimport CreateBlogForm from \"./components/CreateBlogForm\";\nimport LoginForm from \"./components/LoginForm\";\nimport Notification from \"./components/Notification\";\nimport Togglable from \"./components/Togglable\";\n\n// services\nimport blogService from \"./services/blogs\";\nimport loginService from \"./services/login\";\n\n// GO!\nfunction App() {\n  const [blogs, setBlogs] = useState([]);\n  const [notification, setNotification] = useState({});\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    blogService.getAll().then((blogs) => setBlogs(blogs));\n  }, []);\n\n  useEffect(() => {\n    const loggedInUser = window.localStorage.getItem(\"loggedInUser\");\n    if (loggedInUser) {\n      const user = JSON.parse(loggedInUser);\n      setUser(user);\n      blogService.setToken(user.token);\n    }\n  }, []);\n\n  console.log(blogs);\n\n  const handleLike = async (blog) => {\n    const updatedBlog = { ...blog, likes: blog.likes + 1, user: blog.user.id };\n\n    try {\n      await blogService.update(blog.id, updatedBlog);\n      const blogs = await blogService.getAll();\n\n      setBlogs(blogs);\n    } catch (e) {\n      console.log(e.message);\n    }\n  };\n\n  const handleDelete = async (id) => {\n    try {\n      await blogService.remove(id);\n      setBlogs(blogs.filter((blog) => blog.id !== id));\n      setNotification({\n        message: \"blog deleted\",\n        type: \"success\",\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const loginForm = () => (\n    <LoginForm\n      handleLogin={handleLogin}\n      username={username}\n      setUsername={setUsername}\n      password={password}\n      setPassword={setPassword}\n    />\n  );\n\n  const Logo = () => (\n    <h2>\n      Free Speech\n      <span role=\"img\" aria-label=\"parrot\">\n        🤐\n      </span>\n    </h2>\n  );\n\n  const blogForm = () => {\n    const blogsSortedByLike = blogs.sort((a, b) => a.likes < b.likes);\n\n    return (\n      <div>\n        <LogoutButton user={user} />\n        <div className=\"blogs\">\n          <h3>Blogs</h3>\n          <Togglable buttonLabel=\"Create Blog\">\n            <CreateBlogForm\n              blogs={blogs}\n              setBlogs={setBlogs}\n              setNotification={setNotification}\n              user={user}\n            />\n          </Togglable>\n          {blogsSortedByLike.map((blog) => (\n            <Blog\n              key={blog.id}\n              blog={blog}\n              handleLike={handleLike}\n              handleDelete={handleDelete}\n              user={user}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  const LogoutButton = ({ user }) => {\n    const logoutUser = () => {\n      window.localStorage.removeItem(\"loggedInUser\");\n      setUser(null);\n    };\n\n    return (\n      <div id=\"logout\">\n        <strong>{user.name} is logged in</strong>\n        <br />\n        <button onClick={() => logoutUser()}>Logout</button>\n      </div>\n    );\n  };\n\n  const handleLogin = async (event) => {\n    event.preventDefault();\n\n    try {\n      // get user\n      const user = await loginService.login({\n        username,\n        password,\n      });\n\n      // save user to localStorage\n      window.localStorage.setItem(\"loggedInUser\", JSON.stringify(user));\n\n      // make user token accessible to blogs\n      blogService.setToken(user.token);\n\n      // reset forms\n      setUser(user);\n      setUsername(\"\");\n      setPassword(\"\");\n    } catch (exception) {\n      // show error for 5 seconds\n      setNotification({\n        message: \"Invalid username/password combination\",\n        type: \"error\",\n      });\n\n      setTimeout(() => {\n        setNotification({});\n      }, 5000);\n    }\n  };\n\n  return (\n    <div>\n      <Logo />\n      <Notification notification={notification} />\n\n      {user === null ? loginForm() : blogForm()}\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}